Gutuma : Cyberlettres pour PluXml 5.6
TODO :
Gérer les tableaux avec datatablejs (vanilla) !?
Historique des cyberlettres avec le liens envoyés et visibles sur le site
Variables de langues sont en session ['glang']
Si pluXml est en mono utilisateur : autoinstall/connect ???
Le smtp_password est à crypté dans la conf, et décrypté pour l'envoi des news, prévoir la MAJ ou prévenir l'admin. (reverse engineering protect)
eval($plxAdmin->plxPlugins->callHook('AdminTopMenus'));
verifié: si l'on change le(s) mot(s) de passe dans pluxml, si l'accés au plugin et tjrs valable : a priori oui, c'est toujours les id de l'admin (il y a que le nom d'utilisateur qui est différent)
Evol: swiftmailer-5.4.6 pour future integration http://swiftmailer.org
& si theme default -> use static mode & display (site thème au lieu de celui d'admin) ou add gutuma logo (top left|center) [une iframe]
Prévoir en cas de suppression d'un utilisateur, supprimer le param (user activé ou désactivé)
Possibilité d'utiliser les plugins éditeur de texte Tiers (WYSIWY(M|G)) a la place de celuis inclus (TinyMce) Pour plus de possibilité et de réglages (accés aux medias manager, ...)
Redirigé login.php de gutuma vers plugin?p=gutuma (s'affiche lorsque l'on désactive / réactive le plugin et que l'on se rend sur compose, newsletters.php ,...)
AdminSettingsAdvanced plxAdminEditConfiguration ... data/gutuma set in PluXml advanced params
Hook gadget.js.php inclus dans les themes
public function ThemeEndBody(){#auto gadgets
echo "\n\t".'<script type="text/javascript" src="'.PLX_PLUGINS.'gutuma/news/js/gadgets.js.php"></script>';
}

?erreur lors de l'accés chez fe (page login introuvable (une redir qui foire??? a retester (la b2 roule sur un unix like, return to this ??? & update themes) || only 4 local folder???
?Passer par subscribe.php une fois la nvl installée ;) kit a var_dumpé ;)

INCOMPATIBILITÉES :
CSSNOCACHE (DOUBLE INSTANCE ERREUR)

NOTES :
add in url: &DEBUG=1

is_post_var('msg_html')#aperçu
is_post_var('msg_text')text aréa editor name (compose.php & ailleurs ... )

##v.1.8.7.plx.5.6 16/03/2018##
fixé Unable to open message file[::->]Impossible d'ouvrir le fichier de message (surment car le dossier (vide) est tjrs présent
 erreur de fileLock exclusive flock in free.fr 
 Unable to lock newsletter recipient list[::->]Impossible de verrouiller la liste des destinataires de l'infolettre
 lors de l'envoi de newsletter
 http://manpagesfr.free.fr/man/man2/flock.2.html
 Un appel flock() peut bloquer si un verrou incompatible est tenu par un autre processus. Pour que la requête soit non bloquante, il faut inclure LOCK_NB (par un OU binaire « | » ) avec la constante précisant l'opération. 
[+] suppression des tmp free 
[+] misc(.min).js gu_browser_keep_save_pass() & call onsbmit setting form 2 block savepassbrowserbox
[+] function gu_theme_password_control($setting_name,$option=false) add option 4 add autocomplete="off"
[+] gu_sender_test error return system (swift 4 have no multiple?)
[+] debugmsg default theme
[+] Retouche légère du style des boutons principaux
[+] Redirige vers la page "erreur" tout appel a une page de Gutuma (/news/*) si le plugin est désactivé
[+] Hook admin si dans l'admin avec PLX_ADMIN
[+] Infobulle du Menu Admin plus explicite (user friendly) // Change tooltip menu with lang var
[+] public static function set_adehsion($key)
Fix: gutuma settings ::: Test Sendmail never called (FALSE O LIEU DE TRUE)
Fix: _settings pass smtp visible: theme gutuma ::: gu_theme_[text|password]_control()
Fix: misc.php check_email compatible free.fr (filter_var() absente)
Fix: Double News au lien de confirmation d'inscription (Merci Jack31) ::: http://forum.pluxml.org/viewtopic.php?pid=55753#p55753
Fix: Free [PHP.5.1.6] utilise plxUtils::checkMail() si filter_var() indéfinie + remise en route du filtre originel de Gutuma en dernier recours.
Fix: Notices PLX_MULTILINGUE déjà définie lors de l’appel a getInstance de plxMotor [plxMyMultilingue]
Fix: Mauvaise url du fichier css personnel [custom_admincss_file]
Fix: gadget.js gu_init(FALSE, FALSE); (3 FALSE au lieu de 2) Initialize Gutuma without validation or housekeeping

##v.1.8.6.plx.5.6  09/09/2017##
[+] Retouche legere des notifs
[+] GUTUMA_ENCODING = PLX_CHARSET
[+] Les antislash (\) remplacés par des slashs (/) dans les variable textes de config ::: Les antislash (qui sont contre le guitariste) sont remplacé par des slashs (qui sont pour) afin de proteger le fichier de config lorsque l'on applique de nouveaux paramétres ::: Par ex.: Si le nom de l'application était My-NewsLetter\ cela rendait la lecture du fichier de config impossible, voir ci-après
Fix: Serveur win:
:::: La racine ($gu_config['ROOT']) pose probleme après l'install du module, la derniere apostrophe est echapé par un antislash qui empeche d'accédé au reste du code évalué de $gu_conf (ici user) #*# $gu_config['ROOT'] = 'E:\htdocs\PluXml-5.6\myPluXml\plugins\gutuma\news\'; #*# (merci cpalo)
:::: $gu_config['ROOT'] inutile et pose probleme sous windows commenté (todo: a supprimé dan setting.php)


##v.1.8.5.plx.5.6  02/09/2017##
[+] Thèmes & langues retouchés + d'autres subtilités
[+] Canal de mise a jour officiel lié au dépôt github ::: https://raw.githubusercontent.com/jerrywham-pluxml5-2/gutuma/master/news/up_git.js ::: origine v1.6 => http://gutuma.sourceforge.net/update.js.php
[+] Convertisseur html_to_text peaufiné
[+] Arrive direct sur la liste des courriels lorsque l'on change de page (Ajout d'une ancre aux liens << < > >>)
[+] Paramètres TinyMCE: Désactivé, Barre d'outils (défaut), Menu ou Les 2 ensemble
[+] Paramètres TinyMCE: Correcteur orthographique du navigateur (activé par défaut)
Fix: affichage: lors du choix du menu "informations" (index.php) le menu article de plux est actif (en plus de celui d'info) ::: option highlight du lien désactivé (merci PluXml)
Fix² _pluxml.php crash a l'install du module ::: http://forum.pluxml.org/viewtopic.php?pid=55327#p55327
:::: Mauvais chemin racine si PluXml est dans un sous dossier
:::: Mauvaise config de PluXml & gutuma chargé si le dossier du plugin est symbolique (par Exemple, est en réalité dans un autre PluXml) voir l'aide pour faire les modifs nécessaires au fichier news/inc/_pluxml.php ;-)

##v.1.8.4.P56  01/09/2017##
[+] tinyMCE en v4.6.6 + la langue de l'éditeur est celle de l'utilisateur + plugins activé
[+] jsHash mis a jours en 2.2 ::: http://pajhome.org.uk/crypt/md5/scripts.html
[+] js minifiés avec jscompress.com et utlisés
Fix Le fichier de config est écrit en clair un bref instant sur le serveur pendant la sauvegarde des paramétres (core)
Fixs _pluxml.php crash a l'install du module ::: http://forum.pluxml.org/viewtopic.php?pid=55297#p55297
:::: Mauvais chemin racine (1ere idée pour dossier symbolique corrigé)
:::: Serveur autre que Tux
:::: exec interdit en safe_mode (PHP) (Par defaut ds WAMP) && __LINK__ supprimé (inutilisé)

##v.1.8.4.plx.5.6  30/08/2017##
[+] Admin thème 'default' + adapté a PluXml 5.6 & + coloré + responsive (stratégie mobile 1st)
[+] Admin Manager Auto connect ::: Les gestionnaires accèdent a l'interface pour composer une infolettre en JavaScript
[+] Admin choix des thèmes par sélecteur listant les dossiers présent (gutuma & default)
[+] admin Langue anglaise ajouté [todo: help]
[+] admin.php simplifié (code & algo) more dev&user friendly
[+] Français actualisé pour Admin, Aide et Gutuma (news)
[+] Listes et config déplacé du plugin vers data/gutuma/
[+] Dossier temporaire déplacé du système vers data/gutuma/tmp (projets d'infolettres)
[+] Fins de lignes optim 4 unix with dos2unix (thx BaZooKa07)
[+] Codes révisé et optimisé pour plus de performances (server parseless do more, chasse aux espaces superflus)
[+] Options d'import de liste en csv: ignorer la première ligne du fichier, selecteur de séparateur (; ou ,) + adresses dédoublonnées par array_unique
[+] editlist pagination & Navi Amélioré (0 addrs ds list [js gu_ajax_on_remove_address()]) (recharger"editlist" même page ou précédente si dernière page)
 FixOf: si toutes les adresses de la page supprimés on reste là planté là
[+] Peut être un dossier symbolique : ajout dans inc/_pluxml.php de PLX_GROOT, PLX_MORE & __FILE__ ::: duckduckgo.com/?t=lm&q=PHP+SOLVE+FOLDER+SYMLINK&ia=qa
 FixOf: Si le dossier du plugin est un lien symbolique erreur de chargement des librairies & de la config de PluXml (If plugin is in Symlink folder)
Fix Lien classique mauvaise url de retour a l'accueil news/(integrate & subscibe).php (Lien classique)
 Fix: gadget.js.php ::: Bug: Lien classique envoie au mauvais endroit (manque news/ ds l'url) [admin]
Fix Variables de langues déjà présentes dans le cœur de PluXml (Supprimées)
Fix Charger la langue de gutuma en fonction de celle de l'utilisateur
Fix Si apostrophes dans variable texte === config crashé ::: change in texts vars (') simple quote &#39; to Right single quotation mark &#146; &rsquo; (’)
Fix Thème gutuma subscribe.php: affiche le lien retour a l'admin du plugin (lien retour a l'accueil maintenant si non connecté a PluXml)
Fix Aucune redirection si un admin active un utilisateur ::: "login" 2 "name" user 4 var create token in /admin.php & post 2 news/users.php
Fix Thème gutuma (si PluXml non installé, retour)
Fix Doubles quotes in html attributes created with js
Fix Cacher le menu admin si non auth
Fix Souscription si guest user : fichiers ajax, js et subscribe inaccessibles car redirigé a la cnx admin :/
Fix Admin header 404 + mode erreur si ? dans url ou sinon en mode home : suppression des appels au préchauffage() et au démarrage()
Fix Verif config modifiable (themes/*/_index.php) 'inc' to GUTUMA_CONFIG_FILE

##v.1.8.4.plx.5.3.1  02/03/2017##
[+] certaines redir (complexes) doublé d'un méta refresh (pb de not found 404)
[+] fixé lors de certaines opération (js), ne recharge pas la page (champs non mis a jour) (suppression liste,brouillon, ...)
[+] fixé Liste des utilisateurs validés (affiche plusieurs fois (2) les utilisateurs) in settings (Only in default theme)
[+] fixé swift 3 Stricts standards: Only variables should be assigned by reference [php 5.5.6](swift en version 3.3.2)
[*]formulaire ajax (place holder(s)) & value undefined (after demande...) [résolu] !attention aux id
